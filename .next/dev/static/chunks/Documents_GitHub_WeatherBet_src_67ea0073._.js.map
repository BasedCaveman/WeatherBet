{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/lib/wagmi.ts"],"sourcesContent":["import { cookieStorage, createStorage } from \"@wagmi/core\";\nimport { WagmiAdapter } from \"@reown/appkit-adapter-wagmi\";\nimport { defineChain } from \"viem\";\nimport type { AppKitNetwork } from \"@reown/appkit/networks\";\n\n// Get projectId from https://cloud.reown.com\nexport const projectId = process.env.NEXT_PUBLIC_REOWN_PROJECT_ID || \"ff6342f0134a0af6e9f7b972fb1c0afa\";\n\n// Define MegaETH chain\nexport const megaeth = defineChain({\n  id: 6342,\n  name: \"MegaETH Testnet\",\n  nativeCurrency: {\n    decimals: 18,\n    name: \"Ether\",\n    symbol: \"ETH\",\n  },\n  rpcUrls: {\n    default: {\n      http: [\"https://6342.rpc.thirdweb.com\"],\n    },\n  },\n  blockExplorers: {\n    default: {\n      name: \"MegaETH Explorer\",\n      url: \"https://megaexplorer.xyz\",\n    },\n  },\n  testnet: true,\n});\n\n// Networks supported - cast as AppKitNetwork array tuple\nexport const networks = [megaeth] as [AppKitNetwork, ...AppKitNetwork[]];\n\n// Wagmi Adapter for Reown AppKit\nexport const wagmiAdapter = new WagmiAdapter({\n  storage: createStorage({\n    storage: cookieStorage,\n  }),\n  ssr: true,\n  projectId,\n  networks,\n});\n\nexport const config = wagmiAdapter.wagmiConfig;\n\n// App metadata for social login\nexport const appMetadata = {\n  name: \"WeatherBet\",\n  description: \"Weather prediction markets for everyone\",\n  url: typeof window !== \"undefined\" ? window.location.origin : \"https://weatherbet.app\",\n  icons: [\"https://weatherbet.app/icon.png\"],\n};\n\n// Social login features configuration\nexport const socialFeatures = {\n  email: true,\n  // Primary social options (Google & Apple most common)\n  socials: ['google', 'apple', 'x', 'facebook', 'discord'] as const,\n  // Enable smart accounts for gasless transactions\n  emailShowWallets: true,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAMyB;AANzB;AAAA;AACA;AACA;;;;AAIO,MAAM,YAAY,gNAAO,CAAC,GAAG,CAAC,4BAA4B,IAAI;AAG9D,MAAM,UAAU,IAAA,oNAAW,EAAC;IACjC,IAAI;IACJ,MAAM;IACN,gBAAgB;QACd,UAAU;QACV,MAAM;QACN,QAAQ;IACV;IACA,SAAS;QACP,SAAS;YACP,MAAM;gBAAC;aAAgC;QACzC;IACF;IACA,gBAAgB;QACd,SAAS;YACP,MAAM;YACN,KAAK;QACP;IACF;IACA,SAAS;AACX;AAGO,MAAM,WAAW;IAAC;CAAQ;AAG1B,MAAM,eAAe,IAAI,6OAAY,CAAC;IAC3C,SAAS,IAAA,wNAAa,EAAC;QACrB,SAAS,0NAAa;IACxB;IACA,KAAK;IACL;IACA;AACF;AAEO,MAAM,SAAS,aAAa,WAAW;AAGvC,MAAM,cAAc;IACzB,MAAM;IACN,aAAa;IACb,KAAK,uCAAgC,OAAO,QAAQ,CAAC,MAAM,GAAG;IAC9D,OAAO;QAAC;KAAkC;AAC5C;AAGO,MAAM,iBAAiB;IAC5B,OAAO;IACP,sDAAsD;IACtD,SAAS;QAAC;QAAU;QAAS;QAAK;QAAY;KAAU;IACxD,iDAAiD;IACjD,kBAAkB;AACpB"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/providers/Web3Provider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { type ReactNode } from \"react\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { createAppKit } from \"@reown/appkit/react\";\nimport { wagmiAdapter, projectId, networks, megaeth } from \"@/lib/wagmi\";\nimport { WagmiProvider, type Config } from \"wagmi\";\n\n// Create query client\nconst queryClient = new QueryClient();\n\n// Define metadata\nconst metadata = {\n  name: \"WeatherBet\",\n  description: \"Weather hedging for farmers & event planners\",\n  url: typeof window !== \"undefined\" ? window.location.origin : \"https://weatherbet.app\",\n  icons: [\"https://weatherbet.app/icon.png\"],\n};\n\n// Initialize AppKit with social login enabled\nconst appKit = createAppKit({\n  adapters: [wagmiAdapter],\n  projectId: projectId || \"ff6342f0134a0af6e9f7b972fb1c0afa\",\n  networks,\n  defaultNetwork: megaeth,\n  metadata,\n  \n  // SOCIAL LOGIN - Primary authentication method\n  features: {\n    analytics: true,\n    email: true, // Enable email login\n    socials: ['google', 'apple', 'x', 'facebook', 'discord'], // Social providers\n    emailShowWallets: true, // Show wallet option after social login\n    onramp: false, // Disable for now\n  },\n  \n  // Theme\n  themeMode: \"light\",\n  themeVariables: {\n    \"--w3m-accent\": \"#22c55e\",\n    \"--w3m-border-radius-master\": \"2px\",\n  },\n  \n  // All wallets available in \"advanced\" section\n  allWallets: \"SHOW\",\n  featuredWalletIds: [], // Don't feature specific wallets\n});\n\nexport function Web3Provider({ children }: { children: ReactNode }) {\n  return (\n    <WagmiProvider config={wagmiAdapter.wagmiConfig as Config}>\n      <QueryClientProvider client={queryClient}>\n        {children}\n      </QueryClientProvider>\n    </WagmiProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AACA;AACA;AANA;;;;;;AAQA,sBAAsB;AACtB,MAAM,cAAc,IAAI,oOAAW;AAEnC,kBAAkB;AAClB,MAAM,WAAW;IACf,MAAM;IACN,aAAa;IACb,KAAK,uCAAgC,OAAO,QAAQ,CAAC,MAAM,GAAG;IAC9D,OAAO;QAAC;KAAkC;AAC5C;AAEA,8CAA8C;AAC9C,MAAM,SAAS,IAAA,4OAAY,EAAC;IAC1B,UAAU;QAAC,2KAAY;KAAC;IACxB,WAAW,wKAAS,IAAI;IACxB,UAAA,uKAAQ;IACR,gBAAgB,sKAAO;IACvB;IAEA,+CAA+C;IAC/C,UAAU;QACR,WAAW;QACX,OAAO;QACP,SAAS;YAAC;YAAU;YAAS;YAAK;YAAY;SAAU;QACxD,kBAAkB;QAClB,QAAQ;IACV;IAEA,QAAQ;IACR,WAAW;IACX,gBAAgB;QACd,gBAAgB;QAChB,8BAA8B;IAChC;IAEA,8CAA8C;IAC9C,YAAY;IACZ,mBAAmB,EAAE;AACvB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,qBACE,kOAAC,wMAAa;QAAC,QAAQ,2KAAY,CAAC,WAAW;kBAC7C,cAAA,kOAAC,qPAAmB;YAAC,QAAQ;sBAC1B;;;;;;;;;;;AAIT;KARgB"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/lib/weather.ts"],"sourcesContent":["// Weather Service using Open-Meteo API (free, no API key required)\n\nexport interface City {\n  id: number;\n  name: string;\n  country: string;\n  countryCode: string;\n  latitude: number;\n  longitude: number;\n  timezone: string;\n  population?: number;\n}\n\nexport interface WeatherForecast {\n  date: string;\n  temperatureMax: number;\n  temperatureMin: number;\n  precipitationSum: number;\n  precipitationProbability: number;\n}\n\nexport interface WeatherData {\n  city: City;\n  currentTemp: number;\n  forecast: WeatherForecast[];\n  weeklyPrecipitationForecast: number; // mm total for next 7 days\n  weeklyAvgHighTemp: number; // avg max temp for next 7 days\n}\n\nexport interface ClimateAverages {\n  city: City;\n  avgWeeklyPrecipitation: number; // mm (historical average for this week)\n  avgDailyHighTemp: number; // °C (historical average)\n  month: number;\n}\n\n// Search cities by name\nexport async function searchCities(query: string): Promise<City[]> {\n  if (!query || query.length < 2) return [];\n  \n  try {\n    const response = await fetch(\n      `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=10&language=en&format=json`\n    );\n    \n    if (!response.ok) throw new Error(\"Failed to search cities\");\n    \n    const data = await response.json();\n    \n    if (!data.results) return [];\n    \n    return data.results.map((r: any) => ({\n      id: r.id,\n      name: r.name,\n      country: r.country,\n      countryCode: r.country_code,\n      latitude: r.latitude,\n      longitude: r.longitude,\n      timezone: r.timezone,\n      population: r.population,\n    }));\n  } catch (error) {\n    console.error(\"City search error:\", error);\n    return [];\n  }\n}\n\n// Get city from coordinates (reverse geocoding)\nexport async function getCityFromCoords(lat: number, lon: number): Promise<City | null> {\n  try {\n    // Open-Meteo doesn't have reverse geocoding, so we use a nearby city search\n    const response = await fetch(\n      `https://geocoding-api.open-meteo.com/v1/search?name=city&count=1&language=en&format=json`\n    );\n    \n    // Fallback: Create a generic city object from coordinates\n    // In production, you'd use a proper reverse geocoding service\n    return {\n      id: Math.floor(lat * 1000 + lon),\n      name: \"Your Location\",\n      country: \"Detected\",\n      countryCode: \"XX\",\n      latitude: lat,\n      longitude: lon,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    };\n  } catch (error) {\n    console.error(\"Reverse geocoding error:\", error);\n    return null;\n  }\n}\n\n// Get weather forecast for a location\nexport async function getWeatherForecast(city: City): Promise<WeatherData> {\n  try {\n    const response = await fetch(\n      `https://api.open-meteo.com/v1/forecast?` +\n      `latitude=${city.latitude}&longitude=${city.longitude}` +\n      `&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max` +\n      `&current=temperature_2m` +\n      `&timezone=${encodeURIComponent(city.timezone || \"auto\")}` +\n      `&forecast_days=7`\n    );\n    \n    if (!response.ok) throw new Error(\"Failed to fetch weather\");\n    \n    const data = await response.json();\n    \n    const forecast: WeatherForecast[] = data.daily.time.map((date: string, i: number) => ({\n      date,\n      temperatureMax: data.daily.temperature_2m_max[i],\n      temperatureMin: data.daily.temperature_2m_min[i],\n      precipitationSum: data.daily.precipitation_sum[i],\n      precipitationProbability: data.daily.precipitation_probability_max[i],\n    }));\n    \n    // Calculate weekly totals\n    const weeklyPrecipitationForecast = forecast.reduce((sum, day) => sum + day.precipitationSum, 0);\n    const weeklyAvgHighTemp = forecast.reduce((sum, day) => sum + day.temperatureMax, 0) / forecast.length;\n    \n    return {\n      city,\n      currentTemp: data.current.temperature_2m,\n      forecast,\n      weeklyPrecipitationForecast,\n      weeklyAvgHighTemp,\n    };\n  } catch (error) {\n    console.error(\"Weather fetch error:\", error);\n    throw error;\n  }\n}\n\n// Get historical climate averages\n// Note: Open-Meteo climate API requires specific date ranges\nexport async function getClimateAverages(city: City): Promise<ClimateAverages> {\n  try {\n    // Get current month to fetch relevant historical data\n    const now = new Date();\n    const month = now.getMonth() + 1;\n    \n    // Use historical weather API for past years average\n    const currentYear = now.getFullYear();\n    const startYear = currentYear - 10;\n    \n    // Fetch historical data for this week across past 10 years\n    const startDate = `${startYear}-${String(month).padStart(2, \"0\")}-01`;\n    const endDate = `${currentYear - 1}-${String(month).padStart(2, \"0\")}-28`;\n    \n    const response = await fetch(\n      `https://archive-api.open-meteo.com/v1/archive?` +\n      `latitude=${city.latitude}&longitude=${city.longitude}` +\n      `&start_date=${startDate}&end_date=${endDate}` +\n      `&daily=temperature_2m_max,precipitation_sum` +\n      `&timezone=${encodeURIComponent(city.timezone || \"auto\")}`\n    );\n    \n    if (!response.ok) {\n      // Fallback to estimated averages if historical API fails\n      return getEstimatedAverages(city, month);\n    }\n    \n    const data = await response.json();\n    \n    // Calculate averages from historical data\n    const temps = data.daily.temperature_2m_max.filter((t: number | null) => t !== null);\n    const precips = data.daily.precipitation_sum.filter((p: number | null) => p !== null);\n    \n    const avgDailyHighTemp = temps.length > 0 \n      ? temps.reduce((a: number, b: number) => a + b, 0) / temps.length \n      : 25;\n    \n    const avgDailyPrecip = precips.length > 0\n      ? precips.reduce((a: number, b: number) => a + b, 0) / precips.length\n      : 3;\n    \n    return {\n      city,\n      avgWeeklyPrecipitation: avgDailyPrecip * 7, // Weekly average\n      avgDailyHighTemp,\n      month,\n    };\n  } catch (error) {\n    console.error(\"Climate data error:\", error);\n    return getEstimatedAverages(city, new Date().getMonth() + 1);\n  }\n}\n\n// Fallback estimated averages based on latitude and month\nfunction getEstimatedAverages(city: City, month: number): ClimateAverages {\n  const lat = Math.abs(city.latitude);\n  \n  // Rough estimates based on latitude and season\n  let baseTemp = 25;\n  let basePrecip = 20;\n  \n  // Adjust for latitude (tropical vs temperate)\n  if (lat < 23.5) {\n    // Tropical\n    baseTemp = 28;\n    basePrecip = 25;\n  } else if (lat < 45) {\n    // Temperate\n    baseTemp = 20;\n    basePrecip = 15;\n  } else {\n    // Cold regions\n    baseTemp = 12;\n    basePrecip = 12;\n  }\n  \n  // Adjust for season (Northern Hemisphere bias)\n  const isSummer = (city.latitude > 0 && month >= 5 && month <= 9) ||\n                   (city.latitude < 0 && (month >= 11 || month <= 3));\n  \n  if (isSummer) {\n    baseTemp += 5;\n    basePrecip += 10;\n  } else {\n    baseTemp -= 5;\n  }\n  \n  return {\n    city,\n    avgWeeklyPrecipitation: basePrecip,\n    avgDailyHighTemp: baseTemp,\n    month,\n  };\n}\n\n// Popular cities for quick selection\nexport const POPULAR_CITIES: City[] = [\n  { id: 3448439, name: \"São Paulo\", country: \"Brazil\", countryCode: \"BR\", latitude: -23.5475, longitude: -46.6361, timezone: \"America/Sao_Paulo\", population: 12300000 },\n  { id: 1277333, name: \"Mumbai\", country: \"India\", countryCode: \"IN\", latitude: 19.0728, longitude: 72.8826, timezone: \"Asia/Kolkata\", population: 12500000 },\n  { id: 1816670, name: \"Beijing\", country: \"China\", countryCode: \"CN\", latitude: 39.9075, longitude: 116.3972, timezone: \"Asia/Shanghai\", population: 11700000 },\n  { id: 2332459, name: \"Lagos\", country: \"Nigeria\", countryCode: \"NG\", latitude: 6.4541, longitude: 3.3947, timezone: \"Africa/Lagos\", population: 14400000 },\n  { id: 1642911, name: \"Jakarta\", country: \"Indonesia\", countryCode: \"ID\", latitude: -6.2088, longitude: 106.8456, timezone: \"Asia/Jakarta\", population: 10560000 },\n  { id: 5128581, name: \"New York\", country: \"United States\", countryCode: \"US\", latitude: 40.7128, longitude: -74.006, timezone: \"America/New_York\", population: 8336000 },\n  { id: 2643743, name: \"London\", country: \"United Kingdom\", countryCode: \"GB\", latitude: 51.5074, longitude: -0.1278, timezone: \"Europe/London\", population: 8982000 },\n  { id: 1701668, name: \"Manila\", country: \"Philippines\", countryCode: \"PH\", latitude: 14.5995, longitude: 120.9842, timezone: \"Asia/Manila\", population: 1780000 },\n  { id: 3451190, name: \"Rio de Janeiro\", country: \"Brazil\", countryCode: \"BR\", latitude: -22.9068, longitude: -43.1729, timezone: \"America/Sao_Paulo\", population: 6748000 },\n  { id: 1275339, name: \"Kolkata\", country: \"India\", countryCode: \"IN\", latitude: 22.5726, longitude: 88.3639, timezone: \"Asia/Kolkata\", population: 4500000 },\n  { id: 3936456, name: \"Lima\", country: \"Peru\", countryCode: \"PE\", latitude: -12.0464, longitude: -77.0428, timezone: \"America/Lima\", population: 10700000 },\n  { id: 360630, name: \"Cairo\", country: \"Egypt\", countryCode: \"EG\", latitude: 30.0444, longitude: 31.2357, timezone: \"Africa/Cairo\", population: 10200000 },\n];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/providers/LocationProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from \"react\";\nimport { City, searchCities, getWeatherForecast, getClimateAverages, WeatherData, ClimateAverages, POPULAR_CITIES } from \"@/lib/weather\";\n\ninterface LocationContextType {\n  // Current location\n  city: City | null;\n  setCity: (city: City) => void;\n  \n  // Weather data\n  weather: WeatherData | null;\n  climate: ClimateAverages | null;\n  \n  // Loading states\n  isDetecting: boolean;\n  isLoadingWeather: boolean;\n  \n  // Actions\n  detectLocation: () => Promise<void>;\n  searchCity: (query: string) => Promise<City[]>;\n  \n  // Popular cities\n  popularCities: City[];\n  \n  // Error\n  error: string | null;\n}\n\nconst LocationContext = createContext<LocationContextType | undefined>(undefined);\n\nconst STORAGE_KEY = \"weatherbet_city\";\n\nexport function LocationProvider({ children }: { children: ReactNode }) {\n  const [city, setCityState] = useState<City | null>(null);\n  const [weather, setWeather] = useState<WeatherData | null>(null);\n  const [climate, setClimate] = useState<ClimateAverages | null>(null);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [isLoadingWeather, setIsLoadingWeather] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Load saved city on mount\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (saved) {\n        try {\n          const savedCity = JSON.parse(saved) as City;\n          setCityState(savedCity);\n        } catch {\n          // Invalid saved data, ignore\n        }\n      }\n    }\n  }, []);\n\n  // Fetch weather when city changes\n  useEffect(() => {\n    if (city) {\n      fetchWeatherData(city);\n    }\n  }, [city]);\n\n  const fetchWeatherData = async (targetCity: City) => {\n    setIsLoadingWeather(true);\n    setError(null);\n    \n    try {\n      const [weatherData, climateData] = await Promise.all([\n        getWeatherForecast(targetCity),\n        getClimateAverages(targetCity),\n      ]);\n      \n      setWeather(weatherData);\n      setClimate(climateData);\n    } catch (err) {\n      console.error(\"Failed to fetch weather:\", err);\n      setError(\"Failed to load weather data\");\n    } finally {\n      setIsLoadingWeather(false);\n    }\n  };\n\n  const setCity = useCallback((newCity: City) => {\n    setCityState(newCity);\n    \n    // Save to localStorage\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(newCity));\n    }\n  }, []);\n\n  const detectLocation = useCallback(async () => {\n    setIsDetecting(true);\n    setError(null);\n\n    try {\n      // Try GPS first\n      if (\"geolocation\" in navigator) {\n        const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n          navigator.geolocation.getCurrentPosition(resolve, reject, {\n            enableHighAccuracy: false,\n            timeout: 10000,\n            maximumAge: 300000, // 5 minutes cache\n          });\n        });\n\n        const { latitude, longitude } = position.coords;\n        \n        // Search for nearest city using coordinates\n        // Open-Meteo doesn't have reverse geocoding, so we'll use IP fallback\n        // or search for a city near these coordinates\n        const nearbyCity = await findNearestCity(latitude, longitude);\n        \n        if (nearbyCity) {\n          setCity(nearbyCity);\n          setIsDetecting(false);\n          return;\n        }\n      }\n    } catch (gpsError) {\n      console.log(\"GPS failed, trying IP fallback:\", gpsError);\n    }\n\n    // Fallback to IP-based geolocation\n    try {\n      const response = await fetch(\"https://ip-api.com/json/?fields=city,country,countryCode,lat,lon,timezone\");\n      \n      if (response.ok) {\n        const data = await response.json();\n        \n        // Search for the city by name to get proper ID\n        const cities = await searchCities(data.city);\n        \n        if (cities.length > 0) {\n          // Find best match\n          const match = cities.find(c => \n            c.countryCode.toLowerCase() === data.countryCode.toLowerCase()\n          ) || cities[0];\n          \n          setCity(match);\n        } else {\n          // Create city from IP data\n          setCity({\n            id: Math.floor(data.lat * 1000 + data.lon),\n            name: data.city || \"Your Location\",\n            country: data.country,\n            countryCode: data.countryCode,\n            latitude: data.lat,\n            longitude: data.lon,\n            timezone: data.timezone,\n          });\n        }\n      }\n    } catch (ipError) {\n      console.error(\"IP geolocation failed:\", ipError);\n      setError(\"Could not detect location. Please select a city.\");\n    }\n\n    setIsDetecting(false);\n  }, [setCity]);\n\n  const searchCity = useCallback(async (query: string): Promise<City[]> => {\n    return searchCities(query);\n  }, []);\n\n  return (\n    <LocationContext.Provider\n      value={{\n        city,\n        setCity,\n        weather,\n        climate,\n        isDetecting,\n        isLoadingWeather,\n        detectLocation,\n        searchCity,\n        popularCities: POPULAR_CITIES,\n        error,\n      }}\n    >\n      {children}\n    </LocationContext.Provider>\n  );\n}\n\nexport function useLocation() {\n  const context = useContext(LocationContext);\n  if (context === undefined) {\n    throw new Error(\"useLocation must be used within a LocationProvider\");\n  }\n  return context;\n}\n\n// Helper to find nearest city from coordinates\nasync function findNearestCity(lat: number, lon: number): Promise<City | null> {\n  // Find closest from popular cities first\n  let closestCity: City | null = null;\n  let closestDistance = Infinity;\n\n  for (const city of POPULAR_CITIES) {\n    const distance = getDistance(lat, lon, city.latitude, city.longitude);\n    if (distance < closestDistance) {\n      closestDistance = distance;\n      closestCity = city;\n    }\n  }\n\n  // If within 100km of a popular city, use it\n  if (closestCity && closestDistance < 100) {\n    return closestCity;\n  }\n\n  // Otherwise create a custom location\n  return {\n    id: Math.floor(lat * 10000 + lon * 100),\n    name: \"Your Location\",\n    country: \"Detected\",\n    countryCode: \"XX\",\n    latitude: lat,\n    longitude: lon,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  };\n}\n\n// Haversine distance in km\nfunction getDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nfunction toRad(deg: number): number {\n  return deg * (Math.PI / 180);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 683, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/lib/currency.ts"],"sourcesContent":["// Currency Service for ETH to Fiat conversion\n\nexport interface Currency {\n  code: string;\n  symbol: string;\n  name: string;\n  locale: string;\n}\n\nexport interface ExchangeRates {\n  eth: Record<string, number>;\n  timestamp: number;\n}\n\n// Supported currencies\nexport const CURRENCIES: Currency[] = [\n  { code: \"USD\", symbol: \"$\", name: \"US Dollar\", locale: \"en-US\" },\n  { code: \"EUR\", symbol: \"€\", name: \"Euro\", locale: \"de-DE\" },\n  { code: \"BRL\", symbol: \"R$\", name: \"Brazilian Real\", locale: \"pt-BR\" },\n  { code: \"INR\", symbol: \"₹\", name: \"Indian Rupee\", locale: \"en-IN\" },\n  { code: \"CNY\", symbol: \"¥\", name: \"Chinese Yuan\", locale: \"zh-CN\" },\n  { code: \"IDR\", symbol: \"Rp\", name: \"Indonesian Rupiah\", locale: \"id-ID\" },\n  { code: \"NGN\", symbol: \"₦\", name: \"Nigerian Naira\", locale: \"en-NG\" },\n  { code: \"PHP\", symbol: \"₱\", name: \"Philippine Peso\", locale: \"en-PH\" },\n  { code: \"GBP\", symbol: \"£\", name: \"British Pound\", locale: \"en-GB\" },\n  { code: \"MXN\", symbol: \"$\", name: \"Mexican Peso\", locale: \"es-MX\" },\n  { code: \"KES\", symbol: \"KSh\", name: \"Kenyan Shilling\", locale: \"en-KE\" },\n  { code: \"VND\", symbol: \"₫\", name: \"Vietnamese Dong\", locale: \"vi-VN\" },\n  { code: \"THB\", symbol: \"฿\", name: \"Thai Baht\", locale: \"th-TH\" },\n  { code: \"ZAR\", symbol: \"R\", name: \"South African Rand\", locale: \"en-ZA\" },\n  { code: \"ARS\", symbol: \"$\", name: \"Argentine Peso\", locale: \"es-AR\" },\n];\n\n// Country code to currency mapping\nconst COUNTRY_TO_CURRENCY: Record<string, string> = {\n  US: \"USD\", GB: \"GBP\", EU: \"EUR\", DE: \"EUR\", FR: \"EUR\", IT: \"EUR\", ES: \"EUR\",\n  BR: \"BRL\", IN: \"INR\", CN: \"CNY\", ID: \"IDR\", NG: \"NGN\", PH: \"PHP\",\n  MX: \"MXN\", KE: \"KES\", VN: \"VND\", TH: \"THB\", ZA: \"ZAR\", AR: \"ARS\",\n  JP: \"JPY\", KR: \"KRW\", AU: \"AUD\", CA: \"CAD\", NZ: \"NZD\", SG: \"SGD\",\n  // Default to USD for unknown\n};\n\n// Cache for exchange rates\nlet cachedRates: ExchangeRates | null = null;\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n\n// Fetch ETH exchange rates from CoinGecko\nexport async function fetchExchangeRates(): Promise<ExchangeRates> {\n  // Return cached if still valid\n  if (cachedRates && Date.now() - cachedRates.timestamp < CACHE_DURATION) {\n    return cachedRates;\n  }\n\n  try {\n    const currencies = CURRENCIES.map(c => c.code.toLowerCase()).join(\",\");\n    const response = await fetch(\n      `https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=${currencies}`\n    );\n\n    if (!response.ok) throw new Error(\"Failed to fetch rates\");\n\n    const data = await response.json();\n\n    cachedRates = {\n      eth: data.ethereum,\n      timestamp: Date.now(),\n    };\n\n    return cachedRates;\n  } catch (error) {\n    console.error(\"Exchange rate fetch error:\", error);\n    \n    // Return fallback rates if API fails\n    return getFallbackRates();\n  }\n}\n\n// Fallback rates (approximate, updated periodically)\nfunction getFallbackRates(): ExchangeRates {\n  return {\n    eth: {\n      usd: 3500,\n      eur: 3200,\n      brl: 17500,\n      inr: 290000,\n      cny: 25000,\n      idr: 55000000,\n      ngn: 5500000,\n      php: 200000,\n      gbp: 2800,\n      mxn: 60000,\n      kes: 450000,\n      vnd: 88000000,\n      thb: 120000,\n      zar: 63000,\n      ars: 3500000,\n    },\n    timestamp: Date.now(),\n  };\n}\n\n// Convert ETH to fiat\nexport function ethToFiat(ethAmount: number, currencyCode: string, rates: ExchangeRates): number {\n  const rate = rates.eth[currencyCode.toLowerCase()];\n  if (!rate) return ethAmount * (rates.eth.usd || 3500); // Fallback to USD\n  return ethAmount * rate;\n}\n\n// Convert fiat to ETH\nexport function fiatToEth(fiatAmount: number, currencyCode: string, rates: ExchangeRates): number {\n  const rate = rates.eth[currencyCode.toLowerCase()];\n  if (!rate) return fiatAmount / (rates.eth.usd || 3500);\n  return fiatAmount / rate;\n}\n\n// Format amount in local currency\nexport function formatFiat(amount: number, currency: Currency): string {\n  try {\n    return new Intl.NumberFormat(currency.locale, {\n      style: \"currency\",\n      currency: currency.code,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: amount < 100 ? 2 : 0,\n    }).format(amount);\n  } catch {\n    return `${currency.symbol}${amount.toFixed(2)}`;\n  }\n}\n\n// Format ETH amount\nexport function formatEth(amount: number): string {\n  if (amount < 0.001) return \"< 0.001 ETH\";\n  if (amount < 1) return `${amount.toFixed(3)} ETH`;\n  return `${amount.toFixed(2)} ETH`;\n}\n\n// Get currency from country code\nexport function getCurrencyFromCountry(countryCode: string): Currency {\n  const currencyCode = COUNTRY_TO_CURRENCY[countryCode.toUpperCase()] || \"USD\";\n  return CURRENCIES.find(c => c.code === currencyCode) || CURRENCIES[0];\n}\n\n// Detect user's preferred currency\nexport async function detectUserCurrency(): Promise<Currency> {\n  // 1. Check localStorage for saved preference\n  if (typeof window !== \"undefined\") {\n    const saved = localStorage.getItem(\"weatherbet_currency\");\n    if (saved) {\n      const currency = CURRENCIES.find(c => c.code === saved);\n      if (currency) return currency;\n    }\n  }\n\n  // 2. Try to detect from browser locale\n  if (typeof navigator !== \"undefined\") {\n    const locale = navigator.language || \"en-US\";\n    const regionMatch = locale.match(/[-_]([A-Z]{2})$/i);\n    if (regionMatch) {\n      const currency = getCurrencyFromCountry(regionMatch[1]);\n      if (currency) return currency;\n    }\n  }\n\n  // 3. Fallback to USD\n  return CURRENCIES[0];\n}\n\n// Save currency preference\nexport function saveCurrencyPreference(currencyCode: string): void {\n  if (typeof window !== \"undefined\") {\n    localStorage.setItem(\"weatherbet_currency\", currencyCode);\n  }\n}\n\n// Preset bet amounts in fiat (will be converted to ETH)\nexport const FIAT_BET_PRESETS = [\n  { label: \"small\", usdEquivalent: 5 },\n  { label: \"medium\", usdEquivalent: 25 },\n  { label: \"large\", usdEquivalent: 100 },\n  { label: \"max\", usdEquivalent: 500 },\n];\n\n// Get bet presets in user's currency\nexport function getBetPresets(currency: Currency, rates: ExchangeRates): { fiat: number; eth: number }[] {\n  const usdRate = rates.eth.usd || 3500;\n  const userRate = rates.eth[currency.code.toLowerCase()] || usdRate;\n  const conversionFactor = userRate / usdRate;\n\n  return FIAT_BET_PRESETS.map(preset => {\n    const fiatAmount = Math.round(preset.usdEquivalent * conversionFactor);\n    const ethAmount = fiatToEth(fiatAmount, currency.code, rates);\n    return { fiat: fiatAmount, eth: ethAmount };\n  });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 970, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedrox/Documents/GitHub/WeatherBet/src/providers/CurrencyProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, ReactNode } from \"react\";\nimport {\n  Currency,\n  CURRENCIES,\n  ExchangeRates,\n  fetchExchangeRates,\n  detectUserCurrency,\n  saveCurrencyPreference,\n  ethToFiat,\n  fiatToEth,\n  formatFiat,\n  formatEth,\n  getBetPresets,\n} from \"@/lib/currency\";\n\ninterface CurrencyContextType {\n  // Current currency\n  currency: Currency;\n  setCurrency: (currency: Currency) => void;\n  \n  // Exchange rates\n  rates: ExchangeRates | null;\n  isLoading: boolean;\n  \n  // Conversion helpers\n  toFiat: (ethAmount: number) => number;\n  toEth: (fiatAmount: number) => number;\n  \n  // Formatting helpers\n  formatInFiat: (ethAmount: number) => string;\n  formatInEth: (ethAmount: number) => string;\n  \n  // Bet presets in current currency\n  betPresets: { fiat: number; eth: number }[];\n  \n  // All available currencies\n  availableCurrencies: Currency[];\n}\n\nconst CurrencyContext = createContext<CurrencyContextType | undefined>(undefined);\n\nexport function CurrencyProvider({ children }: { children: ReactNode }) {\n  const [currency, setCurrencyState] = useState<Currency>(CURRENCIES[0]); // Default USD\n  const [rates, setRates] = useState<ExchangeRates | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Detect currency and fetch rates on mount\n  useEffect(() => {\n    async function init() {\n      setIsLoading(true);\n      \n      try {\n        // Detect user's preferred currency\n        const detectedCurrency = await detectUserCurrency();\n        setCurrencyState(detectedCurrency);\n        \n        // Fetch exchange rates\n        const exchangeRates = await fetchExchangeRates();\n        setRates(exchangeRates);\n      } catch (error) {\n        console.error(\"Currency init error:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    init();\n  }, []);\n\n  // Refresh rates periodically\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const newRates = await fetchExchangeRates();\n        setRates(newRates);\n      } catch (error) {\n        console.error(\"Rate refresh error:\", error);\n      }\n    }, 5 * 60 * 1000); // Every 5 minutes\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const setCurrency = useCallback((newCurrency: Currency) => {\n    setCurrencyState(newCurrency);\n    saveCurrencyPreference(newCurrency.code);\n  }, []);\n\n  const toFiat = useCallback((ethAmount: number): number => {\n    if (!rates) return ethAmount * 3500; // Fallback\n    return ethToFiat(ethAmount, currency.code, rates);\n  }, [rates, currency]);\n\n  const toEth = useCallback((fiatAmount: number): number => {\n    if (!rates) return fiatAmount / 3500; // Fallback\n    return fiatToEth(fiatAmount, currency.code, rates);\n  }, [rates, currency]);\n\n  const formatInFiat = useCallback((ethAmount: number): string => {\n    const fiatAmount = toFiat(ethAmount);\n    return formatFiat(fiatAmount, currency);\n  }, [toFiat, currency]);\n\n  const formatInEth = useCallback((ethAmount: number): string => {\n    return formatEth(ethAmount);\n  }, []);\n\n  const betPresets = rates ? getBetPresets(currency, rates) : [\n    { fiat: 5, eth: 0.001 },\n    { fiat: 25, eth: 0.007 },\n    { fiat: 100, eth: 0.028 },\n    { fiat: 500, eth: 0.14 },\n  ];\n\n  return (\n    <CurrencyContext.Provider\n      value={{\n        currency,\n        setCurrency,\n        rates,\n        isLoading,\n        toFiat,\n        toEth,\n        formatInFiat,\n        formatInEth,\n        betPresets,\n        availableCurrencies: CURRENCIES,\n      }}\n    >\n      {children}\n    </CurrencyContext.Provider>\n  );\n}\n\nexport function useCurrency() {\n  const context = useContext(CurrencyContext);\n  if (context === undefined) {\n    throw new Error(\"useCurrency must be used within a CurrencyProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAyCA,MAAM,gCAAkB,IAAA,mNAAa,EAAkC;AAEhE,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;;IACpE,MAAM,CAAC,UAAU,iBAAiB,GAAG,IAAA,8MAAQ,EAAW,4KAAU,CAAC,EAAE,GAAG,cAAc;IACtF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8MAAQ,EAAuB;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,8MAAQ,EAAC;IAE3C,2CAA2C;IAC3C,IAAA,+MAAS;sCAAC;YACR,eAAe;gBACb,aAAa;gBAEb,IAAI;oBACF,mCAAmC;oBACnC,MAAM,mBAAmB,MAAM,IAAA,oLAAkB;oBACjD,iBAAiB;oBAEjB,uBAAuB;oBACvB,MAAM,gBAAgB,MAAM,IAAA,oLAAkB;oBAC9C,SAAS;gBACX,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,wBAAwB;gBACxC,SAAU;oBACR,aAAa;gBACf;YACF;YAEA;QACF;qCAAG,EAAE;IAEL,6BAA6B;IAC7B,IAAA,+MAAS;sCAAC;YACR,MAAM,WAAW;uDAAY;oBAC3B,IAAI;wBACF,MAAM,WAAW,MAAM,IAAA,oLAAkB;wBACzC,SAAS;oBACX,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,uBAAuB;oBACvC;gBACF;sDAAG,IAAI,KAAK,OAAO,kBAAkB;YAErC;8CAAO,IAAM,cAAc;;QAC7B;qCAAG,EAAE;IAEL,MAAM,cAAc,IAAA,iNAAW;qDAAC,CAAC;YAC/B,iBAAiB;YACjB,IAAA,wLAAsB,EAAC,YAAY,IAAI;QACzC;oDAAG,EAAE;IAEL,MAAM,SAAS,IAAA,iNAAW;gDAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,OAAO,YAAY,MAAM,WAAW;YAChD,OAAO,IAAA,2KAAS,EAAC,WAAW,SAAS,IAAI,EAAE;QAC7C;+CAAG;QAAC;QAAO;KAAS;IAEpB,MAAM,QAAQ,IAAA,iNAAW;+CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,OAAO,aAAa,MAAM,WAAW;YACjD,OAAO,IAAA,2KAAS,EAAC,YAAY,SAAS,IAAI,EAAE;QAC9C;8CAAG;QAAC;QAAO;KAAS;IAEpB,MAAM,eAAe,IAAA,iNAAW;sDAAC,CAAC;YAChC,MAAM,aAAa,OAAO;YAC1B,OAAO,IAAA,4KAAU,EAAC,YAAY;QAChC;qDAAG;QAAC;QAAQ;KAAS;IAErB,MAAM,cAAc,IAAA,iNAAW;qDAAC,CAAC;YAC/B,OAAO,IAAA,2KAAS,EAAC;QACnB;oDAAG,EAAE;IAEL,MAAM,aAAa,QAAQ,IAAA,+KAAa,EAAC,UAAU,SAAS;QAC1D;YAAE,MAAM;YAAG,KAAK;QAAM;QACtB;YAAE,MAAM;YAAI,KAAK;QAAM;QACvB;YAAE,MAAM;YAAK,KAAK;QAAM;QACxB;YAAE,MAAM;YAAK,KAAK;QAAK;KACxB;IAED,qBACE,kOAAC,gBAAgB,QAAQ;QACvB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,qBAAqB,4KAAU;QACjC;kBAEC;;;;;;AAGP;GA3FgB;KAAA;AA6FT,SAAS;;IACd,MAAM,UAAU,IAAA,gNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}}]
}